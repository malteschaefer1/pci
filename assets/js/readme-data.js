// Auto-generated from README.md on 2025-11-15T20:19:12.061596+00:00
// Do not edit manually â€“ run `python3 scripts/build-readme.py` instead.
window.__PCI_README__ = "# PCI Circularity Calculator \u2013 Browser-based Tool\n\n> \u26a0\ufe0f **Work in progress:** This app evolves alongside the PCI methodology. Always sense-check results.\n\nThis browser-only tool reproduces the Product Circularity Indicator (PCI), Component Circularity Indicator (CCI), and Circularity Impact Indicator (CII) workflow from **PCI_paper_V2.pdf** (Sections 3\u20134 + Appendix A). Open `index.html` and you can enter, import, visualize, and export results without installing anything.\n\n[View source on GitHub](https://github.com/malteschaefer1/pci).\n\n<figure style=\"background:#fff;padding:12px;border:1px solid #e0e0e0;border-radius:6px;\">\n  <img src=\"examples/flowchart_generic.png\" alt=\"Workflow overview\" style=\"display:block;margin:0 auto;background:#fff;max-width:100%;height:auto;\">\n  <figcaption style=\"text-align:center;margin-top:8px;font-style:italic;\">Generic flowchart showcasing the PCI variables, flows, and system boundary (adapted from <a href=\"https://doi.org/10.1016/j.resconrec.2019.104608\" target=\"_blank\" rel=\"noopener\">Braquen\u00e9 et al.</a> - click to enlarge).</figcaption>\n</figure>\n\n## Background\n\nThe workflow is adapted from M\u00fcller et al., *Assessing Product Circularity and Carbon Footprint: Electromagnetic Guard Locking System Case Study* (PCI_paper_V2.pdf). The tool follows:\n\n- Section 3: Six-step integrated procedure for PCI + PCF assessments (v1 focuses on PCI/CCI/CII only).\n- Section 4: Case study structure for handling components and hotspots.\n- Appendix A: Equations 3\u201323 for PCI, CCI, CII, LFI, and all intermediate mass flows.\n\nAll UI field names map directly to Appendix A (`Fu`, `Fr`, `Efp`, `Ecp`, \u2026). Percent inputs are entered as 0\u2013100 and stored internally as fractions.\n\n## \ud83e\udded Choose your path\n\n| Persona | Start here |\n| --- | --- |\n| \ud83c\udd95 **Never used Git/GitHub** | Follow the \u201cDownload ZIP\u201d steps below and open `index.html`. |\n| \ud83d\udcbc **Product or design lead** | Use the ready-made CSVs in `/examples` to explore the case study immediately. |\n| \ud83e\uddd1\u200d\ud83d\udcbb **Engineer / Analyst** | Clone the repo, edit the code, or extend the math layer for PCF integration. |\n\n## \u2728 Highlights\n\n- \ud83d\udd0c **Zero-install**: double-click `index.html`; no build tools or servers.\n- \ud83d\udce5 **CSV templates** for BoM and circularity parameters plus CSV export of working data and results.\n- \ud83e\uddee **Built-in data grid** for manual entry with validation and sample components.\n- \ud83d\udcca **Chart.js visualizations** for CCI and CII per component.\n- \ud83e\udde0 **Defensive math layer** (`assets/js/circularity.js`) that implements Equations 3\u201323 with extensive JSDoc comments and optional debug logging.\n- \u26a0\ufe0f **Friendly status messages** and per-cell highlighting for invalid data (missing IDs, duplicate IDs, negative mass, out-of-range efficiencies, etc.).\n- \ud83d\udcc2 **Ready-to-use case-study CSVs** in `/examples` mirroring the paper\u2019s data (load them via Step 2\u2019s upload buttons to explore the full workflow instantly).\n- \ud83c\udf0d **Locale-aware exports**: pick your decimal separator (dot/comma) before downloading CSVs.\n\n## \ud83e\uddd1\u200d\ud83c\udf73 Quick start recipes\n\n### Option A \u2013 Download ZIP (Git-free)\n1. Click the green **Code \u25be \u2192 Download ZIP** button in GitHub.\n2. Unzip the archive (Windows: right-click \u2192 *Extract All...*; macOS: double-click).\n3. Open the extracted folder and double-click `index.html`.\n4. That\u2019s it\u2014your browser hosts the entire tool offline.\n\n### Option B \u2013 Clone via Git\n```bash\ngit clone https://github.com/<your-org>/pci.git\ncd pci\nopen index.html   # macOS\n# or\nstart index.html  # Windows PowerShell\n```\n\n### Try the paper\u2019s dataset immediately\n1. Go to **Step 2 \u2013 CSV mode**.\n2. Click **Upload BoM CSV** and choose `examples/bom_case_study.csv`.\n3. Click **Upload input-factors CSV** and choose `examples/input_factors_case_study.csv`.\n4. Continue with Step 3 to replicate the case-study results.\n\n## Quick start\n\n1. Clone or download this repository.\n2. Open `index.html` in a modern browser (Chrome, Edge, Firefox, Safari desktop or tablet).\n3. Use the example data or import your own CSVs.\n4. Click **Compute circularity indicators** to obtain PCI/CCI/CII and the charts.\n5. Export BoM, factors, or results as CSV for documentation.\n\nThe interface is fully client-side, so no data leaves your machine.\n\n## Workflow walkthrough\n\n1. **Step 1 \u2013 Product parameters**: enter `Fu`, `Cu`, `Cr`, and the lifetime/use-intensity pairs (`L`, `Ld`, `I`, `Id`). These drive the use factor `X = (I \u00b7 L) / (Id \u00b7 Ld)` (Eq. 8).\n2. **Step 2 \u2013 BoM & input factors**: either download the CSV templates or work directly in the Manual table. Columns map to the component inputs defined in Section 3.2. Prefer CSV mode? Use the templates or upload the case-study files from `/examples` (`bom_case_study.csv`, `input_factors_case_study.csv`) to reproduce the paper\u2019s dataset.\n3. **Step 3 \u2013 Calculation**: validates the grid and runs all equations from Appendix A, exposing per-component warnings (e.g., when CCI gets clamped to zero).\n4. **Step 4 \u2013 Visualizations**: displays two bar charts (CCI and CII by component) using Chart.js.\n5. **Step 5 \u2013 Export**: download your BoM, factor table, or the enriched results (CCI, CII, LFI, V/W/R flows).\n\n## CSV formats\n\n### BoM template\n\n```csv\ncomponent_id,component_name,material,process,mass_kg\nC1,Housing,Polyamide,Injection-molding,0.16\n```\n\n### Input-factor template\n\n```csv\ncomponent_id,Fr_percent,Efp_percent,Ecp_percent,Cfp_percent,Ccp_percent,Ems_percent,Erfp_percent\nC1,0,100,95,0,100,30,30\n```\n\n- Percent inputs are provided as 0\u2013100 in the CSV, matching the UI. They are converted to fractions internally.\n- Both templates can be downloaded directly from the UI and re-uploaded after editing in Excel, Sheets, or similar.\n\n## Calculation details\n\n- **PCI (Eq. 3 & 5)**: mass-weighted average of component CCIs plus the use-factor adjustment `PCI = 1 - (LFI / X)`. Negative PCI values are clamped to 0 as suggested in Appendix A.\n- **CCI (Eq. 6)**: per-component version of PCI using the same `X`.\n- **CII (Eq. 4)**: `CII\u1d62 = 100 \u00d7 (PCI / CCI\u1d62) / \u03a3(PCI / CCI\u2c7c)`. When a CCI approaches zero the UI reports a warning and sets CII to zero to avoid divide-by-zero artifacts.\n- **Linear Flow Index (Eq. 7)**: implemented with helper functions for:\n  - Virgin feedstock mass `V` (Eq. 9)\n  - Waste mass terms `W_fp`, `W_cp`, `W_u`, `W_ms`, `W_rfp` (Eq. 10\u201315)\n  - Recycling flows `R_in`, `R_out` including `R_fp`, `R_cp`, `R_EoL` (Eq. 16\u201321)\n  - Reused component mass `C` (Eq. 22)\n  - Linear reference flows `V_linear`, `W_linear` (Eq. 23)\n- **Debugging**: set `DEBUG_LOG` in `assets/js/app.js` to `true` to print intermediate flows (V, W, Rin/Rout, LFI) to the console for each component.\n\nVariable naming aligns with the paper: `Fu`, `Cu`, `Cr`, `Fr`, `Efp`, `Ecp`, `Cfp`, `Ccp`, `Ems`, `Erfp`, `M`, and so on.\n\n## Limitations & scope\n\n- v1 focuses solely on PCI/CCI/CII. Hooks for PCF/LCA integration are not implemented yet but can be added in `app.js`.\n- The UI assumes positive component masses and efficiency values within [0, 1]. Values outside that range are clamped or trigger validation errors.\n- CSV parsing relies on Papa Parse when available; a lightweight fallback handles basic comma-separated files. Exotic quoting/encoding scenarios may require preprocessing.\n- Charts and downloads run entirely client-side, so extremely large BoMs may feel slower on low-power devices.\n\n## Development notes\n\n- **Structure**\n  - `index.html` \u2013 single-page layout with five steps.\n  - `assets/css/styles.css` \u2013 responsive styling, table layout, status states.\n  - `assets/js/app.js` \u2013 UI orchestration, validation, event handling, CSV wiring, and chart updates.\n  - `assets/js/circularity.js` \u2013 pure math layer (no DOM), fully documented with the equation references.\n  - `assets/js/csv-utils.js` \u2013 CSV template generation, parsing, and export helpers (using Papa Parse if present).\n  - `assets/js/charts.js` \u2013 Chart.js wrapper for the two bar charts.\n- **Extending the UI**: Add tabs/sections in `index.html`, style via `styles.css`, and wire new controls in `app.js`.\n- **Adding metrics**: expand `circularity.js` with additional pure functions and import them into `app.js`. Keep new math functions pure and well-commented.\n- **Debugging**: toggle `DEBUG_LOG` in `app.js` or inspect the `debug` object returned by `computeCircularityIndicators`.\n- **README viewer**: after editing this Markdown file, run `python3 scripts/build-readme.py` to refresh the offline viewer (`README.html` / `assets/js/readme-data.js`).\n\n## License\n\nThe project is released under the <a href=\"LICENSE\" target=\"_blank\" rel=\"noopener\">MIT License</a>. All methodology details remain credited to the authors of the <a href=\"PCI_paper_V2.pdf\" target=\"_blank\" rel=\"noopener\">PCI methodology paper</a>.\n";
